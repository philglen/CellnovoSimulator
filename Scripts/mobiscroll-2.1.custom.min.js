(function(b){function r(a,h){function e(a){return b.isArray(d.readonly)?(a=b(".dwwl",m).index(a),d.readonly[a]):d.readonly}function c(a){var b="",f=d.height,h;for(h in J[a])b+='<li class="dw-v" data-val="'+h+'" style="height:'+f+"px;line-height:"+f+'px;">'+J[a][h]+"</li>";return b}function i(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight)}function r(a){o=b("li.dw-v",a).eq(0).index();n=b("li.dw-v",a).eq(-1).index();
s=b("ul",m).index(a);C=d.height;D=f}function B(a){var b=d.headerText;return b?"function"==typeof b?b.call(t,a):b.replace(/{value}/i,a):""}function R(){f.temp=G&&null!==f.val&&f.val!=a.val()||null===f.values?d.parseValue(a.val()?a.val():"",f):f.values.slice(0);f.setValue(!0)}function K(a,h,e,g,c){d.validate.call(t,m,e,a);b(".dww ul",m).each(function(d){var g=b(this),p=b('li[data-val="'+f.temp[d]+'"]',g),g=p.index();if(!p.hasClass("dw-v")){for(var l=p,m=0,i=0;l.prev().length&&!l.hasClass("dw-v");)l=
l.prev(),m++;for(;p.next().length&&!p.hasClass("dw-v");)p=p.next(),i++;(i<m&&i&&1==!c||!m||!l.hasClass("dw-v")||1==c)&&p.hasClass("dw-v")?g+=i:(p=l,g-=m);f.temp[d]=p.attr("data-val")}p=d==e||void 0===e;f.scroll(b(this),g,p?a:0.2,h,d)});f.change(g)}function N(){function f(){b(".dwc",m).each(function(){"none"!=b(this).css("display")&&(p=b(this).outerWidth(!0),h+=p,g=p>g?p:g)});p=h>e?g:h;p=b(".dwwr",m).width(p+1).outerWidth();Q=k.outerHeight()}if("inline"!=d.display){var h=0,g=0,e=b(window).width(),
l=window.innerHeight,c=b(window).scrollTop(),k=b(".dw",m),p,j,v,Q,A,q={},r,o=void 0===d.anchor?a:d.anchor,l=l?l:b(window).height();if("modal"==d.display)f(),v=(e-p)/2,j=c+(l-Q)/2;else if("bubble"==d.display){f();var n=o.offset(),t=b(".dw-arr",m),s=b(".dw-arrw-i",m),w=k.outerWidth();A=o.outerWidth();v=n.left-(k.outerWidth(!0)-A)/2;v=v>e-w?e-(w+20):v;v=0<=v?v:20;j=n.top-(k.outerHeight()+3);j<c||n.top>c+l?(k.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),j=n.top+o.outerHeight()+3,r=j+k.outerHeight(!0)>
c+l||n.top>c+l):k.removeClass("dw-bubble-bottom").addClass("dw-bubble-top");j=j>=c?j:c;c=n.left+A/2-(v+(w-s.outerWidth())/2);c>s.outerWidth()&&(c=s.outerWidth());t.css({left:c})}else q.width="100%","top"==d.display?j=c:"bottom"==d.display&&(j=c+l-k.outerHeight(),j=0<=j?j:0);q.top=j;q.left=v;k.css(q);b(".dwo, .dw-persp").height(0).height(i());r&&b(window).scrollTop(j+k.outerHeight(!0)-l)}}function V(a){var b=+a.data("pos")+1;g(a,b>n?o:b,1)}function W(a){var b=+a.data("pos")-1;g(a,b<o?n:b,2)}var f=
this,t=a,a=b(t),O,S,d=b.extend({},T),U,m,J=[],L={},G=a.is("input"),H=!1;f.enable=function(){d.disabled=!1;G&&a.prop("disabled",!1)};f.disable=function(){d.disabled=!0;G&&a.prop("disabled",!0)};f.scroll=function(a,b,f,h,c){var g=(U-b)*d.height;a.attr("style",(f?w+"-transition:all "+f.toFixed(1)+"s ease-out;":"")+(A?w+"-transform:translate3d(0,"+g+"px,0);":"top:"+g+"px;"));clearInterval(L[c]);if(f&&void 0!==h){var e=0;L[c]=setInterval(function(){e+=0.1;a.data("pos",Math.round((b-h)*Math.sin(e/f*(Math.PI/
2))+h));e>=f&&(clearInterval(L[c]),a.data("pos",b).closest(".dwwl").removeClass("dwa"))},100)}else a.data("pos",b)};f.setValue=function(b,h,c,e){e||(f.values=f.temp.slice(0));H&&b&&K(c);h&&(b=d.formatResult(f.temp),f.val=b,G&&a.val(b).trigger("change"))};f.validate=function(a,b,d,f){K(a,b,d,!0,f)};f.change=function(a){var h=d.formatResult(f.temp);"inline"==d.display?f.setValue(!1,a):b(".dwv",m).html(B(h));a&&d.onChange.call(t,h,f)};f.hide=function(h){if(!1===d.onClose.call(t,f.val,f))return!1;b(".dwtd").prop("disabled",
!1).removeClass("dwtd");a.blur();m&&("inline"!=d.display&&d.animate&&!h?(b(".dw",m).addClass("dw-"+d.animate+" dw-out"),setTimeout(function(){m.remove();m=null},350)):(m.remove(),m=null),H=!1,b(window).unbind(".dw"))};f.changeWheel=function(){if(m){var a=0,f=arguments.length,h;for(h in d.wheels)for(var e in d.wheels[h]){if(-1<b.inArray(a,arguments)&&(J[a]=d.wheels[h][e],b("ul",m).eq(a).html(c(a)),!--f)){N();K();return}a++}}};f.show=function(h){if(d.disabled||H)return!1;"top"==d.display&&(d.animate=
"slidedown");"bottom"==d.display&&(d.animate="slideup");R();d.onBeforeShow.call(t,m,f);var j=0,i=d.height,n="",A="",o="";d.animate&&!h&&(A='<div class="dw-persp">',o="</div>",n="dw-"+d.animate+" dw-in");h='<div class="'+d.theme+" dw-"+d.display+'">'+("inline"==d.display?'<div class="dw dwbg dwi"><div class="dwwr">':A+'<div class="dwo"></div><div class="dw dwbg '+n+'"><div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div><div class="dwwr">'+(d.headerText?'<div class="dwv"></div>':
""));for(n=0;n<d.wheels.length;n++){var h=h+('<div class="dwc'+("scroller"!=d.mode?" dwpm":" dwsc")+(d.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>'),w;for(w in d.wheels[n])J[j]=d.wheels[n][w],h+='<td><div class="dwwl dwrc dwwl'+j+'">'+("scroller"!=d.mode?'<div class="dwwb dwwbp" style="height:'+i+"px;line-height:"+i+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+i+"px;line-height:"+i+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+
w+'</div><div class="dww dwrc" style="height:'+d.rows*i+"px;min-width:"+d.width+'px;"><ul>',h+=c(j),h+='</ul><div class="dwwo"></div></div><div class="dwwol"></div></div></td>',j++;h+="</tr></table></div></div>"}h+=("inline"!=d.display?'<div class="dwbc'+(d.button3?" dwbc-p":"")+'"><span class="dwbw dwb-s"><span class="dwb">'+d.setText+"</span></span>"+(d.button3?'<span class="dwbw dwb-n"><span class="dwb">'+d.button3Text+"</span></span>":"")+'<span class="dwbw dwb-c"><span class="dwb">'+d.cancelText+
"</span></span></div>"+o:'<div class="dwcc"></div>')+"</div></div></div>";m=b(h);K();"inline"!=d.display?m.appendTo("body"):a.is("div")?a.html(m):m.insertAfter(a);H=!0;"inline"!=d.display&&(b(".dwb-s span",m).click(function(){f.hide();f.setValue(false,true);d.onSelect.call(t,f.val,f);return false}),b(".dwb-c span",m).click(function(){f.hide();d.onCancel.call(t,f.val,f);return false}),d.button3&&b(".dwb-n span",m).click(d.button3),d.scrollLock&&m.bind("touchmove",function(a){a.preventDefault()}),b("input,select").each(function(){b(this).prop("disabled")||
b(this).addClass("dwtd")}),b("input,select").prop("disabled",!0),N(),b(window).bind("resize.dw",N));m.delegate(".dwwl","DOMMouseScroll mousewheel",function(a){if(!e(this)){a.preventDefault();var a=a.originalEvent,a=a.wheelDelta?a.wheelDelta/120:a.detail?-a.detail/3:0,h=b("ul",this),d=+h.data("pos"),d=Math.round(d-a);r(h);g(h,d,a<0?1:2)}}).delegate(".dwb, .dwwb",P,function(){b(this).addClass("dwb-a")}).delegate(".dwwb",P,function(a){var h=b(this).closest(".dwwl");if(!e(h)&&!h.hasClass("dwa")){a.preventDefault();
a.stopPropagation();var f=h.find("ul"),c=b(this).hasClass("dwwbp")?V:W;y=true;r(f);clearInterval(k);k=setInterval(function(){c(f)},d.delay);c(f)}}).delegate(".dwwl",P,function(a){a.preventDefault();if(!e(this)&&!y&&d.mode!="clickpick"){E=true;q=b("ul",this);q.closest(".dwwl").addClass("dwa");l=+q.data("pos");r(q);clearInterval(L[s]);u=F(a);z=new Date;x=u;f.scroll(q,l)}});d.onShow.call(t,m,f);O.init(m,f)};f.init=function(c){O=b.extend({defaults:{},init:j},b.scroller.themes[c.theme?c.theme:d.theme]);
S=b.scroller.i18n[c.lang?c.lang:d.lang];b.extend(d,O.defaults,S,h,c);f.settings=d;U=Math.floor(d.rows/2);var e=b.scroller.presets[d.preset];a.unbind(".dw");e&&(e=e.call(t,f),b.extend(d,e,h,c),b.extend(M,e.methods));void 0!==a.data("dwro")&&(t.readOnly=I(a.data("dwro")));H&&f.hide();"inline"==d.display?f.show():(R(),G&&d.showOnFocus&&(a.data("dwro",t.readOnly),t.readOnly=!0,a.bind("focus.dw",function(){f.show()})))};f.values=null;f.val=null;f.temp=null;f.init(h)}function i(a){for(var b in a)if(void 0!==
c[a[b]])return!0;return!1}function F(a){return a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches?a.originalEvent?a.originalEvent.changedTouches[0].pageY:a.changedTouches[0].pageY:a.pageY}function I(a){return!0===a||"true"==a}function g(a,h,c,e,g){h=h>n?n:h;h=h<o?o:h;a=b("li",a).eq(h);D.temp[s]=a.attr("data-val");D.validate(e?h==g?0.1:Math.abs(0.1*(h-g)):0,g,s,c)}var e={},k,j=function(){},C,o,n,D,B=(new Date).getTime(),E,y,q,s,u,x,z,l,c=document.createElement("modernizr").style,A=i(["perspectiveProperty",
"WebkitPerspective","MozPerspective","OPerspective","msPerspective"])&&"webkitPerspective"in document.documentElement.style,w=function(){var a=["Webkit","Moz","O","ms"],b;for(b in a)if(i([a[b]+"Transform"]))return"-"+a[b].toLowerCase();return""}(),P="touchstart mousedown",T={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,showOnFocus:!0,showLabel:!0,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",scrollLock:!0,
onBeforeShow:j,onShow:j,onClose:j,onSelect:j,onCancel:j,onChange:j,formatResult:function(a){for(var b="",c=0;c<a.length;c++)b+=(0<c?" ":"")+a[c];return b},parseValue:function(a,b){for(var c=b.settings.wheels,a=a.split(" "),e=[],g=0,l=0;l<c.length;l++)for(var j in c[l]){if(void 0!==c[l][j][a[g]])e.push(a[g]);else for(var i in c[l][j]){e.push(i);break}g++}return e},validate:j},M={init:function(a){void 0===a&&(a={});return this.each(function(){this.id||(B+=1,this.id="scoller"+B);e[this.id]=new r(this,
a)})},enable:function(){return this.each(function(){var a=e[this.id];a&&a.enable()})},disable:function(){return this.each(function(){var a=e[this.id];a&&a.disable()})},isDisabled:function(){var a=e[this[0].id];if(a)return a.settings.disabled},option:function(a,b){return this.each(function(){var c=e[this.id];if(c){var g={};"object"===typeof a?g=a:g[a]=b;c.init(g)}})},setValue:function(a,b,c,g){return this.each(function(){var l=e[this.id];l&&(l.temp=a,l.setValue(!0,b,c,g))})},getInst:function(){return e[this[0].id]},
getValue:function(){var a=e[this[0].id];if(a)return a.values},show:function(){var a=e[this[0].id];if(a)return a.show()},hide:function(){return this.each(function(){var a=e[this.id];a&&a.hide()})},destroy:function(){return this.each(function(){var a=e[this.id];a&&(a.hide(),b(this).unbind(".dw"),delete e[this.id],b(this).is("input")&&(this.readOnly=I(b(this).data("dwro"))))})}};b(document).bind("touchmove mousemove",function(a){E&&(a.preventDefault(),x=F(a),a=l+(u-x)/C,a=a>n+1?n+1:a,a=a<o-1?o-1:a,D.scroll(q,
a))});b(document).bind("touchend mouseup",function(a){if(E){a.preventDefault();var c=new Date-z,a=l+(u-x)/C,a=a>n+1?n+1:a,a=a<o-1?o-1:a;300>c?(c=(x-u)/c,c=c*c/0.0012,0>x-u&&(c=-c)):c=x-u;g(q,Math.round(l-c/C),0,!0,Math.round(a));E=!1;q=null}y&&(clearInterval(k),y=!1);b(".dwb-a").removeClass("dwb-a")});b.fn.scroller=function(a){if(M[a])return M[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return M.init.apply(this,arguments);b.error("Unknown method")};b.scroller=
{setDefaults:function(a){b.extend(T,a)},presets:{},themes:{},i18n:{}}})(jQuery);(function(b){var r={inputClass:"",invalid:[],rtl:!1,group:!1,groupLabel:"Groups"};b.scroller.presets.select=function(i){function F(b){return b?b.replace(/_/,""):""}function I(){var l,c=0,i=[{}];if(g.group){g.rtl&&(c=1);var k={};b("optgroup",e).each(function(c){k["_"+c]=b(this).attr("label")});i[c]={};i[c][g.groupLabel]=k;l=j;g.rtl?c--:c++}else l=e;i[c]={};i[c][B]={};b("option",l).each(function(){var e=b(this).attr("value");i[c][B]["_"+e]=b(this).text();b(this).prop("disabled")&&E.push(e)});return i}
var g=b.extend({},r,i.settings),e=b(this),k=e.val(),j=e.find('option[value="'+e.val()+'"]').parent(),C=j.index()+"",o,n=this.id+"_dummy";b('label[for="'+this.id+'"]').attr("for",n);var D=b('label[for="'+n+'"]'),B=void 0!==g.label?g.label:D.length?D.text():e.attr("name"),E=[],y={},q,s,u,x=i.settings.readonly;g.group&&!b("optgroup",e).length&&(g.group=!1);g.invalid.length||(g.invalid=E);g.group?g.rtl?(q=1,s=0):(q=0,s=1):(q=-1,s=0);b("#"+n).remove();b("option",e).each(function(){y[b(this).attr("value")]=
b(this).text()});var z=b('<input type="text" id="'+n+'" value="'+y[e.val()]+'" class="'+g.inputClass+'" readonly />').insertBefore(e);i.settings.anchor=z;g.showOnFocus&&z.focus(function(){i.show()});e.bind("change",function(){!o&&k!=e.val()&&i.setSelectVal([e.val()],true);o=false}).hide().closest(".ui-field-contain").trigger("create");i.setSelectVal=function(b,c,n){k=b[0];if(g.group){j=e.find('option[value="'+k+'"]').parent();i.temp=g.rtl?["_"+k,"_"+j.index()]:["_"+j.index(),"_"+k]}else i.temp=["_"+
k];i.setValue(true,c,n);if(c){z.val(y[k]);b=k!==e.val();e.val(k);b&&e.trigger("change")}};i.getSelectVal=function(b){return F((b?i.temp:i.values)[s])};return{width:200,wheels:void 0,headerText:!1,formatResult:function(){return y[k]},parseValue:function(){k=e.val();j=e.find('option[value="'+k+'"]').parent();return g.group&&g.rtl?["_"+k,"_"+j.index()]:g.group?["_"+j.index(),"_"+k]:["_"+k]},validate:function(l,c,n){if(c===q){c=F(i.temp[q]);if(c!==C){i.settings.readonly=[g.rtl,!g.rtl];j=e.find("optgroup").eq(c);
k=(k=j.find("option").eq(0).val())?k:e.val();clearTimeout(u);u=setTimeout(function(){i.settings.wheels=I();if(g.group){i.temp=g.rtl?["_"+k,"_"+j.index()]:["_"+j.index(),"_"+k];i.changeWheel(s);C=j.index()+""}i.settings.readonly=x},n*1E3)}else i.settings.readonly=x}else k=F(i.temp[s]);b.each(g.invalid,function(c,e){b('li[data-val="_'+e+'"]',l).removeClass("dw-v")})},onShow:function(e){b(".dwwl"+q,e).bind("mousedown touchstart",function(){clearTimeout(u)})},onBeforeShow:function(){i.settings.wheels=
I();if(g.group)i.temp=g.rtl?["_"+k,"_"+j.index()]:["_"+j.index(),"_"+k]},onSelect:function(b,c){z.val(b);o=true;e.val(k).trigger("change");if(g.group)c.values=null},onCancel:function(){if(g.group)i.values=null},onChange:function(b,c){if(g.display=="inline"){z.val(b);o=true;e.val(F(c.temp[s])).trigger("change")}},onClose:function(){z.blur()},methods:{setValue:function(e,c,g){return this.each(function(){var i=b(this).scroller("getInst");if(i)if(i.setSelectVal)i.setSelectVal(e,c,g);else{i.temp=e;i.setValue(true,
c,g)}})},getValue:function(e){var c=b(this).scroller("getInst");if(c)return c.getSelectVal?c.getSelectVal(e):c.values}}}}})(jQuery);(function(b){b.widget("mobile.mobiscroll",b.mobile.widget,{options:{theme:"jqm",preset:"date",animate:"pop"},_create:function(){var r=this.element,i=b.extend(this.options,r.jqmData("options"));r.scroller(i)}});b(document).bind("pagebeforecreate",function(r){b('input[type="date"]:jqmData(role="mobiscroll")',r.target).prop("type","text")});b(document).bind("pagecreate create",function(r){b(document).trigger("mobiscrollbeforecreate");b(':jqmData(role="mobiscroll")',r.target).each(function(){"undefined"===
typeof b(this).data("mobiscroll")&&b(this).mobiscroll()})})})(jQuery);
